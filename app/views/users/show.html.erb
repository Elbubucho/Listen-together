<div class="mt-20">
  <%= link_to "Feed", root_path, class: "btn btn-primary" %>

  <% unless @is_own_profile %>
    <% if @existing_friendship.nil? %>
        <%= link_to "Add as friend", friendships_path(receiver_id: @user.id), data: {turbo_method: :post}  %>
    <% elsif @existing_friendship.asker == current_user %>
      <span>Already added as friend</span>
    <% elsif @existing_friendship.receiver == current_user %>
<%= link_to "Accept as friend", friendship_path(@existing_friendship), data: { turbo_method: :patch }, class: "btn btn-soft btn-primary" %>
    <% end %>
  <% end %>
</div>

<div class = "mt-10">
  <%# <%= image_tag @user.avatar_url, alt: "Avatar" %>
  <%= @user.username.capitalize%>
  <p><%= @user.posts.count %> posts <p>
  <p><%= link_to "#{@friends_count} friends", friends_user_path(@user) %></p>
</div>

<div>
   <div class="min-h-screen flex items-center justify-center bg-base-100 my-25">
  <div class="flex flex-col gap-6">
    <% if @posts.any? %>
    <% @posts.order(id: :desc).each do |post| %>
      <div class="card w-96 bg-base-200 shadow-xl">
        <legend class="fieldset-legend"><%= link_to post.user.username, user_path(post.user) %></li>'s <%= post.mood %></legend>
        <div class="card-body items-center text-center">
          <p class="mb-4"><%= post.content %></p>
            <iframe src="https://open.spotify.com/embed/track/<%= post.track_id %>"
                    width="300" height="80" frameborder="0"
                    allowtransparency="true" allow="encrypted-media">
                    </iframe>
          <div class="card-actions justify-end w-full mt-4">
            <%= render partial: "reactions/button", locals: { post: post } %>
            <%= link_to "Comment",  post_path(post.id), class: "btn btn-primary" %>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
  </div>
</div>

</div>
